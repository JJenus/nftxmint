import{a as v,u as N}from"./authStates.O0QqZF7c.js";import{d as w,k as d,l as m,z as e,G as h,L as y,a as x,O as T,M as V,N as U,u as p,J as D,P as I,o as B,B as C,Q as R,R as O,H as F,I as L,q as M}from"./swiper-vue.YPEZXV01.js";import{u as S,n as z}from"./entry.tuGhYkLH.js";import{e as P,s as j}from"./showAlert.o-xGKRew.js";import{a as q}from"./axios.I3Q7ufft.js";import"./cookie.mnkNnLdW.js";/*!
 * currency.js - v2.0.4
 * http://scurker.github.io/currency.js
 *
 * Copyright (c) 2021 Jason Wilson
 * Released under MIT license
 */var H={symbol:"$",separator:",",decimal:".",errorOnInvalid:!1,precision:2,pattern:"!#",negativePattern:"-!#",format:Q,fromCents:!1},E=function(s){return Math.round(s)},A=function(s){return Math.pow(10,s)},J=function(s,t){return E(s/t)*t},G=/(\d)(?=(\d{3})+\b)/g,K=/(\d)(?=(\d\d)+\d\b)/g;function f(o,s){var t=this;if(!(t instanceof f))return new f(o,s);var i=Object.assign({},H,s),n=A(i.precision),a=$(o,i);t.intValue=a,t.value=a/n,i.increment=i.increment||1/n,i.useVedic?i.groups=K:i.groups=G,this.s=i,this.p=n}function $(o,s){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=0,n=s.decimal,a=s.errorOnInvalid,c=s.precision,u=s.fromCents,_=A(c),l=typeof o=="number",r=o instanceof f;if(r&&u)return o.intValue;if(l||r)i=r?o.value:o;else if(typeof o=="string"){var b=new RegExp("[^-\\d"+n+"]","g"),k=new RegExp("\\"+n,"g");i=o.replace(/\((.*)\)/,"-$1").replace(b,"").replace(k,"."),i=i||0}else{if(a)throw Error("Invalid Input");i=0}return u||(i*=_,i=i.toFixed(4)),t?E(i):i}function Q(o,s){var t=s.pattern,i=s.negativePattern,n=s.symbol,a=s.separator,c=s.decimal,u=s.groups,_=(""+o).replace(/^-/,"").split("."),l=_[0],r=_[1];return(o.value>=0?t:i).replace("!",n).replace("#",l.replace(u,"$1"+a)+(r?c+r:""))}f.prototype={add:function(s){var t=this.intValue,i=this.s,n=this.p;return f((t+=$(s,i))/(i.fromCents?1:n),i)},subtract:function(s){var t=this.intValue,i=this.s,n=this.p;return f((t-=$(s,i))/(i.fromCents?1:n),i)},multiply:function(s){var t=this.intValue,i=this.s;return f((t*=s)/(i.fromCents?1:A(i.precision)),i)},divide:function(s){var t=this.intValue,i=this.s;return f(t/=$(s,i,!1),i)},distribute:function(s){for(var t=this.intValue,i=this.p,n=this.s,a=[],c=Math[t>=0?"floor":"ceil"](t/s),u=Math.abs(t-c*s),_=n.fromCents?1:i;s!==0;s--){var l=f(c/_,n);u-- >0&&(l=l[t>=0?"add":"subtract"](1/_)),a.push(l)}return a},dollars:function(){return~~this.value},cents:function(){var s=this.intValue,t=this.p;return~~(s%t)},format:function(s){var t=this.s;return typeof s=="function"?s(this,t):t.format(this,Object.assign({},t,s))},toString:function(){var s=this.intValue,t=this.p,i=this.s;return J(s/t,i.increment).toFixed(i.precision)},toJSON:function(){return this.value}};const W={class:"card-body d-flex flex-center flex-column py-9 px-5",bis_skin_checked:"1"},X={class:"symbol symbol-65px symbol-circle mb-5",bis_skin_checked:"1"},Y=["src"],Z=e("div",{class:"bg-success position-absolute rounded-circle translate-middle start-100 top-100 border border-4 border-body h-15px w-15px ms-n3 mt-n3",bis_skin_checked:"1"},null,-1),ee={role:"button",class:"fs-4 text-gray-800 text-hover-primary fw-bold mb-0"},se={class:"fw-semibold text-gray-400 mb-6",bis_skin_checked:"1"},te={class:"d-flex flex-center flex-wrap mb-0",bis_skin_checked:"1"},ie={class:"border border-dashed rounded min-w-90px py-3 px-4 mx-2 mb-3",bis_skin_checked:"1"},ne={class:"fs-6 fw-bold text-gray-700",bis_skin_checked:"1"},oe=e("i",{class:"fa-brands fa-ethereum fs-2 text-warning me-1"},null,-1),ae=e("div",{class:"fw-semibold text-gray-400",bis_skin_checked:"1"}," Balance ",-1),le=w({__name:"User",props:{user:{}},setup(o){const s=v().active,t=o,i=()=>{let n=t.user.balance;return n||(n="0"),f(n,{symbol:"",precision:8}).format()};return(n,a)=>(d(),m("div",{onClick:a[0]||(a[0]=c=>s.value=n.user),class:"card user border-dashed border-primary",bis_skin_checked:"1"},[e("div",W,[e("div",X,[e("img",{src:n.user.profileImg||n.$config.public.DEFAULT_DP,alt:"image"},null,8,Y),Z]),e("a",ee,h(n.user.name?n.user.name:"unknown collector"),1),e("div",se,h(n.user.email),1),e("div",te,[e("div",ie,[e("div",ne,[oe,y(" "+h(i()),1)]),ae])])])]))}}),re={class:"card mb-5 mb-xl-10",bis_skin_checked:"1"},ce={class:"card-body d-flex flex-column justify-content-center align-items-center py-8",bis_skin_checked:"1"},de={class:"w-lg-400px"},ue=e("div",{class:"mb-13 text-center"},[e("h1",{class:"mb-3"},"Top Up"),e("div",{class:"text-muted fw-semibold fs-5"},[y(" Increase user balance. Only admin users can do this. "),e("a",{role:"button",class:"link-primary fw-bold"},"(admin)"),y(". ")])],-1),_e={class:"d-flex flex-column mb-7 fv-row fv-plugins-icon-container"},me=e("label",{class:"d-flex align-items-center fs-6 fw-semibold form-label mb-2"},[e("span",{class:"required"},"User Email"),e("span",{class:"ms-1","data-bs-toggle":"tooltip","aria-label":"Specify a card holder's name","data-bs-original-title":"Specify a card holder's name","data-kt-initialized":"1"},[e("i",{class:"ki-outline ki-information-5 text-gray-500 fs-6"})])],-1),be=e("div",{class:"fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback"},null,-1),pe={class:"d-flex flex-column mb-7 fv-row fv-plugins-icon-container"},fe=e("label",{class:"required fs-6 fw-semibold form-label mb-2"},"Amount",-1),he={class:"position-relative"},ve=e("div",{class:"fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback"},null,-1),ke={class:"text-center pt-15"},ge=e("button",{type:"reset",id:"kt_modal_new_card_cancel",class:"btn btn-light me-3"}," Discard ",-1),xe=e("span",{class:"indicator-label"}," Submit ",-1),ye=e("span",{class:"indicator-progress"},[y(" Please wait... "),e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),we=[xe,ye],$e=w({__name:"UserTransaction",props:{user:{}},setup(o){const s=o,t=S(),i=x(),n=x({email:s.user.email,amount:""}),a=x(s.user),c=()=>{const _=f(a.value.balance,{symbol:"",precision:8}).add(n.value.amount);a.value.balance=_.value+"",console.log("user",a.value)},u=()=>{var l;if(console.log(n.value),!n.value.amount||!n.value.email){P("Fill from correctly");return}c();const _={method:"put",data:a.value,url:`${t.public.BE_API}/users`,timeout:2e4,headers:{Authorization:"Bearer "+((l=N().userData.value)==null?void 0:l.token)}};i.value.setAttribute("data-kt-indicator","on"),q.request(_).then(r=>{const b=r.data;console.log(b),j("Saved! New balance: "+b.amount),v().getUsers()}).catch(r=>{P("Unable to update balance"),console.log(r)}).finally(()=>{i.value.removeAttribute("data-kt-indicator")})};return(_,l)=>(d(),m("div",re,[e("div",ce,[e("div",de,[ue,e("form",{onSubmit:l[2]||(l[2]=T(r=>u(),["prevent"])),class:"form fv-plugins-bootstrap5 fv-plugins-framework",action:"#","data-select2-id":"select2-data-kt_modal_new_card_form"},[e("div",_e,[me,V(e("input",{disabled:"",type:"text",class:"form-control form-control-solid",placeholder:"Enter user email",name:"email","onUpdate:modelValue":l[0]||(l[0]=r=>p(n).email=r)},null,512),[[U,p(n).email]]),be]),e("div",pe,[fe,e("div",he,[V(e("input",{type:"text",class:"form-control form-control-solid",placeholder:"Enter Amount",name:"amount","onUpdate:modelValue":l[1]||(l[1]=r=>p(n).amount=r)},null,512),[[U,p(n).amount]])]),ve]),e("div",ke,[ge,e("button",{type:"submit",ref_key:"submitButton",ref:i,class:"btn btn-primary"},we,512)])],32)])])]))}}),Ve={class:"card mb-5 mb-xl-10 border-0",id:"kt_profile_details_view",bis_skin_checked:"1"},Ue={class:"card-header cursor-pointer align-items-center",bis_skin_checked:"1"},Ce=e("div",{class:"card-title m-0",bis_skin_checked:"1"},[e("h3",{class:"fw-bold m-0"},"Profile Details")],-1),Ae=I('<span class="indicator-label"><i class="ki-duotone ki-user-tick fs-3"><span class="path1"></span><span class="path2"></span><span class="path3"></span></i> Verify </span><span class="indicator-progress"> Please wait... <span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>',2),Pe=[Ae],Be={key:1},Ee=e("span",{class:"bullet bullet-dot h-5px w-5px bg-gray-400"},null,-1),Ne=e("span",{class:"bullet bullet-dot h-5px w-5px bg-gray-400 mx-2"},null,-1),Te=e("span",{class:"bullet bullet-dot h-5px w-5px bg-gray-400"},null,-1),De=[Ee,Ne,Te],Ie={class:"card-body p-9",bis_skin_checked:"1"},Re={class:"row mb-7",bis_skin_checked:"1"},Oe=e("label",{class:"col-lg-4 fw-semibold text-muted"},"Full Name",-1),Fe={class:"col-lg-8",bis_skin_checked:"1"},Le={class:"fw-bold fs-6 text-gray-800"},Me={class:"row mb-7",bis_skin_checked:"1"},Se=e("label",{class:"col-5 col-lg-4 fw-semibold text-muted"}," Email ",-1),ze={class:"col-7 col-lg-8 d-flex align-items-center flex-wrap",bis_skin_checked:"1"},je={class:"fw-semibold text-gray-800 fs-6 me-2"},qe={key:0,class:"badge badge-success"},He={key:1,class:"badge badge-danger"},Je={class:"row mb-7",bis_skin_checked:"1"},Ge=e("label",{class:"col-5 col-lg-4 fw-semibold text-muted"},[y(" Contact Phone "),e("span",{class:"ms-1","data-bs-toggle":"tooltip","aria-label":"Phone number must be active","data-bs-original-title":"Phone number must be active","data-kt-initialized":"1"},[e("i",{class:"ki-outline ki-information fs-7"})])],-1),Ke={class:"col-7 col-lg-8 fv-row",bis_skin_checked:"1"},Qe={class:"fw-bold fs-6 text-gray-800 me-2"},We={class:"row mb-7",bis_skin_checked:"1"},Xe=e("label",{class:"col-5 col-lg-4 fw-semibold text-muted"},"ETH Address",-1),Ye={class:"col-7 col-lg-8",bis_skin_checked:"1"},Ze={role:"button",class:"fw-semibold fs-6 text-gray-800 text-hover-primary"},es={class:"notice d-flex bg-light-warning rounded border-warning border border-dashed p-6",bis_skin_checked:"1"},ss=e("i",{class:"ki-outline ki-information fs-2tx text-warning me-4"},null,-1),ts={key:0,class:"d-flex flex-stack flex-grow-1",bis_skin_checked:"1"},is=e("div",{class:"fw-semibold",bis_skin_checked:"1"},[e("h4",{class:"text-gray-900 fw-bold"}," We need your attention! "),e("div",{class:"fs-6 text-gray-700",bis_skin_checked:"1"}," >Email is not verified. ")],-1),ns=[is],os=w({__name:"UserProfile",props:{user:{}},setup(o){const s=x();return(t,i)=>{var n,a,c,u,_;return d(),m("div",Ve,[e("div",Ue,[Ce,(n=t.user)!=null&&n.status?(d(),m("div",Be,De)):(d(),m("button",{key:0,ref_key:"submitButton",ref:s,class:"btn btn-light-primary"},Pe,512))]),e("div",Ie,[e("div",Re,[Oe,e("div",Fe,[e("span",Le,h(t.user.name?t.user.name:"Unknown Collector"),1)])]),e("div",Me,[Se,e("div",ze,[e("span",je,h((a=t.user)==null?void 0:a.email),1),((c=t.user)==null?void 0:c.status)=="verified"?(d(),m("span",qe,"Verified")):(d(),m("span",He,"Not verified"))])]),e("div",Je,[Ge,e("div",Ke,[e("span",Qe,h(t.user.phone?t.user.phone:"Unknown"),1)])]),e("div",We,[Xe,e("div",Ye,[e("a",Ze,h((u=t.user)==null?void 0:u.ethAddress),1)])]),e("div",es,[ss,((_=t.user)==null?void 0:_.status)!=="veified"?(d(),m("div",ts,ns)):D("",!0)])])])}}}),as={class:"card card-flush mb-9",id:"kt_user_profile_panel",bis_skin_checked:"1"},ls=e("div",{class:"card-header rounded-top bgi-size-cover h-200px",style:{"background-position":"100% 50%","background-image":"url('/assets/media/auth/bg14.jpg')"},bis_skin_checked:"1"},null,-1),rs={class:"card-body mt-n19",bis_skin_checked:"1"},cs={class:"m-0",bis_skin_checked:"1"},ds={class:"d-flex flex-stack align-items-end pb-4 mt-n19",bis_skin_checked:"1"},us={class:"symbol symbol-125px symbol-lg-150px symbol-fixed position-relative mt-n3",bis_skin_checked:"1"},_s=["src"],ms=e("div",{class:"position-absolute translate-middle bottom-0 start-100 ms-n1 mb-9 bg-success rounded-circle h-15px w-15px",bis_skin_checked:"1"},null,-1),bs={class:"d-flex flex-stack flex-wrap align-items-end",bis_skin_checked:"1"},ps={class:"d-flex flex-column",bis_skin_checked:"1"},fs={class:"d-flex align-items-center mb-2",bis_skin_checked:"1"},hs={role:"button",class:"text-gray-800 text-hover-primary fs-2 fw-bolder me-1"},vs={role:"button",class:"","data-bs-toggle":"tooltip","data-bs-placement":"right","aria-label":"Account is verified","data-bs-original-title":"Account is verified","data-kt-initialized":"1"},ks={key:0,class:"ki-outline ki-verify fs-1 text-primary"},gs={key:1,tooltip:"Not verified",class:"ki-outline ki-information fs-1 text-danger"},xs={class:"d-flex align-items-center flex-wrap fw-semibold mb-5 mb-lg-0 fs-7 pe-2",bis_skin_checked:"1"},ys=e("span",{class:"bullet bullet-dot h-5px w-5px bg-gray-400 mx-3"},null,-1),ws={href:"#",class:"d-block text-gray-400 text-hover-primary mw-lg-400px mw-200px text-truncate"},$s=e("span",{class:"bullet bullet-dot h-5px w-5px bg-gray-400 mx-3"},null,-1),Vs={class:"fs-2 fw-bold mb-8"},Us={class:"d-flex",bis_skin_checked:"1"},Cs=e("i",{class:"ki-outline ki-check fs-2 d-none"},null,-1),As=e("span",{class:"indicator-label"}," Back",-1),Ps=[Cs,As],Bs={class:"card-footer border-0"},Es=w({__name:"UserView",setup(o){x("");const s=v().active,t=x(null),i=()=>{var u;let a=(u=s.value)==null?void 0:u.balance;return a||(a="0"),f(a,{symbol:"",precision:8}).format()},n=()=>{s.value=null};return B(()=>{}),(a,c)=>{var l,r,b,k;const u=$e,_=os;return d(),m("div",null,[e("div",as,[ls,e("div",rs,[e("div",cs,[e("div",ds,[e("div",us,[e("img",{src:((l=p(s))==null?void 0:l.profileImg)||a.$config.public.DEFAULT_DP,alt:"image",class:"border border-white border-4",style:{"border-radius":"20px"}},null,8,_s),ms])]),e("div",bs,[e("div",ps,[e("div",fs,[e("a",hs,h((r=p(s))==null?void 0:r.name),1),e("a",vs,[((b=p(s))==null?void 0:b.status)==="verified"?(d(),m("i",ks)):(d(),m("i",gs))])]),e("div",xs,[ys,e("div",ws,h((k=p(s))==null?void 0:k.ethAddress),1),$s]),e("div",Vs,"ETH "+h(i()),1)]),e("div",Us,[p(t)?(d(),m("a",{key:1,onClick:c[1]||(c[1]=g=>t.value=null),role:"button",class:"btn btn-sm btn-light me-3"}," Profile ")):(d(),m("a",{key:0,onClick:c[0]||(c[0]=g=>t.value="notify"),role:"button",class:"btn btn-sm btn-light me-3"}," Fund User ")),e("button",{onClick:c[2]||(c[2]=g=>n()),class:"btn btn-sm btn-primary"},Ps)])])])]),e("div",Bs,[p(t)?(d(),C(u,{key:0,user:p(s)},null,8,["user"])):(d(),C(_,{key:1,user:p(s)},null,8,["user"]))])])])}}}),Ns={class:"h-md-100"},Ts={key:0,class:""},Ds={class:"card card-flush card-custom border-0 h-md-100 mb-5 mb-lg-10"},Is={class:"card-body"},Rs={class:"d-block d-flex flex-column align-items-center justify-content-center"},Os={class:"text-center h2 pb-2 fw-bold"},Fs={class:"position-relative my-1",bis_skin_checked:"1"},Ls=e("i",{class:"ki-outline ki-magnifier fs-2 position-absolute top-50 translate-middle-y ms-4"},null,-1),Ms={class:"row g-6 mb-6 g-xl-10 mb-xl-9 px-8"},Ss={class:"col-12 col-md-4 hover-scale cursor-pointer",bis_skin_checked:"1"},Ks=w({__name:"users",async setup(o){let s,t;const i=v().data;(i.value.userRole==null||i.value.userRole!=="admin")&&([s,t]=R(()=>z("/account")),await s,t());const n=x(""),a=v().active,c=()=>v().users.value.length;v().users.value.length===0&&v().getUsers();function u(l){return l?(l=l.toLowerCase(),v().users.value.filter(b=>b.name&&b.name.toLowerCase().includes(l)||b.email&&b.email.toLowerCase().includes(l)||b.phone&&b.phone.toLowerCase().includes(l))):v().users.value}const _=()=>{u(n.value)};return B(()=>{}),(l,r)=>{const b=le,k=Es;return d(),m("div",Ns,[p(a)?(d(),C(k,{key:1})):(d(),m("div",Ts,[e("div",Ds,[e("div",Is,[e("div",Rs,[e("h1",Os," Users ("+h(c())+") ",1),e("div",Fs,[Ls,V(e("input",{onKeyup:r[0]||(r[0]=g=>_()),type:"text","data-kt-table-widget-4":"search",class:"form-control w-150px fs-7 ps-12",placeholder:"Search","onUpdate:modelValue":r[1]||(r[1]=g=>O(n)?n.value=g:null)},null,544),[[U,p(n)]])])])])]),e("div",Ms,[(d(!0),m(F,null,L(u(p(n)),g=>(d(),m("div",Ss,[M(b,{user:g},null,8,["user"])]))),256))])]))])}}});export{Ks as default};
